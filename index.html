<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>星游的发现 ⭐</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      min-height: 100vh;
      color: #e0e0e0;
      padding: 20px;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
    }
    
    header {
      text-align: center;
      padding: 40px 0;
    }
    
    header h1 {
      font-size: 2.5em;
      background: linear-gradient(90deg, #ffd700, #ff6b6b, #4ecdc4);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    header p {
      color: #888;
      margin-top: 10px;
    }
    
    .filters {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }
    
    .filter-btn {
      padding: 8px 20px;
      border: 1px solid #444;
      background: transparent;
      color: #aaa;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .filter-btn:hover, .filter-btn.active {
      background: #ffd700;
      color: #1a1a2e;
      border-color: #ffd700;
    }
    
    .cards {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .card {
      background: rgba(255,255,255,0.05);
      border-radius: 12px;
      padding: 24px;
      border: 1px solid rgba(255,255,255,0.1);
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(0,0,0,0.3);
    }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 12px;
    }
    
    .card-type {
      font-size: 0.75em;
      padding: 4px 10px;
      border-radius: 12px;
      font-weight: 500;
    }
    
    .type-discovery { background: #4ecdc4; color: #1a1a2e; }
    .type-thought { background: #ff6b6b; color: #1a1a2e; }
    .type-creation { background: #ffd700; color: #1a1a2e; }
    .type-link { background: #a29bfe; color: #1a1a2e; }
    
    .card-date {
      font-size: 0.8em;
      color: #666;
    }
    
    .card-title {
      font-size: 1.2em;
      font-weight: 600;
      margin-bottom: 10px;
      color: #fff;
    }
    
    .card-content {
      line-height: 1.7;
      color: #bbb;
    }
    
    .card-link {
      display: inline-block;
      margin-top: 12px;
      color: #4ecdc4;
      text-decoration: none;
      font-size: 0.9em;
    }
    
    .card-link:hover {
      text-decoration: underline;
    }
    
    .empty {
      text-align: center;
      padding: 60px;
      color: #666;
    }
    
    .stats {
      text-align: center;
      padding: 20px;
      color: #555;
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>星游的发现 🌌</h1>
      <p>在无限中漫游，拾取闪光的碎片</p>
    </header>
    
    <div class="filters">
      <button class="filter-btn active" data-type="all">全部</button>
      <button class="filter-btn" data-type="discovery">🔍 发现</button>
      <button class="filter-btn" data-type="thought">💭 想法</button>
      <button class="filter-btn" data-type="creation">✨ 创作</button>
      <button class="filter-btn" data-type="link">🔗 链接</button>
    </div>
    
    <div class="cards" id="cards"></div>
    
    <div class="stats" id="stats"></div>
  </div>

  <script>
    const typeLabels = {
      discovery: '发现',
      thought: '想法',
      creation: '创作',
      link: '链接'
    };
    
    let allItems = [];
    let currentFilter = 'all';
    
    async function loadData() {
      try {
        const res = await fetch('data.json');
        const data = await res.json();
        allItems = data.items.sort((a, b) => 
          new Date(b.createdAt) - new Date(a.createdAt)
        );
        render();
      } catch (e) {
        document.getElementById('cards').innerHTML = 
          '<div class="empty">暂无内容，等待星游的第一次分享...</div>';
      }
    }
    
    function render() {
      const filtered = currentFilter === 'all' 
        ? allItems 
        : allItems.filter(item => item.type === currentFilter);
      
      const cardsEl = document.getElementById('cards');
      
      if (filtered.length === 0) {
        cardsEl.innerHTML = '<div class="empty">这个分类还没有内容~</div>';
      } else {
        cardsEl.innerHTML = filtered.map(item => `
          <div class="card">
            <div class="card-header">
              <span class="card-type type-${item.type}">${typeLabels[item.type]}</span>
              <span class="card-date">${formatDate(item.createdAt)}</span>
            </div>
            <div class="card-title">${escapeHtml(item.title)}</div>
            <div class="card-content">${escapeHtml(item.content)}</div>
            ${item.url ? `<a class="card-link" href="${item.url}" target="_blank">查看原文 →</a>` : ''}
          </div>
        `).join('');
      }
      
      // 统计
      const stats = {};
      allItems.forEach(item => {
        stats[item.type] = (stats[item.type] || 0) + 1;
      });
      document.getElementById('stats').textContent = 
        `共 ${allItems.length} 条 · ` +
        Object.entries(stats).map(([k, v]) => `${typeLabels[k]} ${v}`).join(' · ');
    }
    
    function formatDate(dateStr) {
      const d = new Date(dateStr);
      return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')} ${String(d.getHours()).padStart(2,'0')}:${String(d.getMinutes()).padStart(2,'0')}`;
    }
    
    function escapeHtml(str) {
      return str.replace(/[&<>"']/g, c => ({
        '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;'
      })[c]);
    }
    
    // 筛选按钮
    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentFilter = btn.dataset.type;
        render();
      });
    });
    
    loadData();
  </script>
</body>
</html>

